(()=>{var t={},e={},n=[],o=1,r=15;function c(){var t=Math.ceil(n.length/r);document.getElementById("total-pages").value=t,document.getElementById("page-number").max=t}function a(){var a=document.getElementById("data");a.innerHTML="";var d=(o-1)*r,i=d+r;n.slice(d,i).forEach((function(n){var o=document.createElement("tr");o.setAttribute("data-id",n.id);var r=AutoNumeric.format(n.selling_price,{currencySymbol:"Rp",decimalPlaces:2}),c=AutoNumeric.format(n.cost_of_product,{currencySymbol:"Rp",decimalPlaces:2}),d=t[n.category]||n.category,i=e[n.unit]||n.unit;o.innerHTML='\n      <td><input type="checkbox" class="data-checkbox" id="checkbox-'.concat(n.id,'"></td>\n      <td>').concat(n.product_name,"</td>\n      <td>").concat(n.product_code,"</td>\n      <td>").concat(n.barcode,"</td>\n      <td>").concat(d,"</td>\n      <td>").concat(i,"</td>\n      <td>").concat(r,"</td>\n      <td>").concat(c,"</td>\n      <td>").concat(n.product_initial_qty,'</td>\n      <td>\n        <button class="btn btn-sm btn-light btn-light-bordered edit-button" data-id="').concat(n.id,'"><i class="fa fa-edit"></i></button>\n        <button class="btn btn-sm btn-danger delete-button" data-id="').concat(n.id,'"><i class="fa fa-trash"></i></button>\n      </td>'),a.appendChild(o),o.querySelector(".delete-button").addEventListener("click",(function(){var t=this.getAttribute("data-id");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){var n,r;e.isConfirmed&&(n=[t],r=function(){o.remove(),Swal.fire("Deleted!","Your product has been deleted.","success")},fetch("http://localhost:3001/products/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n})}).then((function(t){return t.json()})).then((function(t){t.success?r():Swal.fire({icon:"error",title:"Error",text:"Failed to delete products"})})).catch((function(t){console.error("Error deleting products:",t),Swal.fire({icon:"error",title:"Error",text:"Error deleting products"})})))}))})),o.querySelector(".edit-button").addEventListener("click",(function(){var t=this.getAttribute("data-id");openFormEditData(t)}))})),c(),document.getElementById("page-number").value=o}function d(){var t=new(0,window.jspdf.jsPDF);t.autoTable({html:"#products-table",theme:"grid",headStyles:{fillColor:[105,105,105]}}),t.save("products.pdf")}function i(){for(var t=document.getElementById("products-table").cloneNode(!0),e=t.rows,n=0;n<e.length;n++)e[n].deleteCell(0),e[n].deleteCell(-1);var o=window.open("");o.document.write("\n    <html>\n      <head>\n        <title>Print Table</title>\n        <style>\n          table {\n            width: 100%;\n            border-collapse: collapse;\n          }\n          th, td {\n            border: 1px solid black;\n            padding: 8px;\n            text-align: left;\n          }\n          th {\n            background-color: #f2f2f2;\n          }\n        </style>\n      </head>\n      <body>\n        ".concat(t.outerHTML,"\n      </body>\n    </html>\n  ")),o.document.close(),o.print(),o.close()}function l(){var t=document.getElementById("search-data").value;fetch("http://localhost:3001/products/search/".concat(t)).then((function(t){return t.json()})).then((function(t){t.success?(n=t.data,o=1,c(),a()):Swal.fire({icon:"error",title:"Error",text:"Failed to fetch search results"})})).catch((function(t){console.error("Error fetching search results:",t),Swal.fire({icon:"error",title:"Error",text:"Error fetching search results"})}))}document.addEventListener("DOMContentLoaded",(function(){new AutoNumeric("#product_price",{currencySymbol:"Rp",decimalPlaces:2}),new AutoNumeric("#product_cost",{currencySymbol:"Rp",decimalPlaces:2}),document.getElementById("form-add-data").classList.remove("active"),fetch("http://localhost:3001/categories").then((function(t){return t.json()})).then((function(e){if(e.success){var n=document.getElementById("product_category");e.data.forEach((function(e){var o=document.createElement("option");o.value=e.id,o.textContent=e.category,n.appendChild(o),t[e.id]=e.category})),console.log("Categories fetched and displayed successfully",e.data)}else Swal.fire({icon:"error",title:"Error",text:"Failed to fetch categories"})})).catch((function(t){console.error("Error fetching categories:",t),Swal.fire({icon:"error",title:"Error",text:"Error fetching categories"})})),fetch("http://localhost:3001/units").then((function(t){return t.json()})).then((function(t){if(t.success){var n=document.getElementById("product_unit");t.data.forEach((function(t){var o=document.createElement("option");o.value=t.id,o.textContent=t.unit,n.appendChild(o),e[t.id]=t.unit})),console.log("Units fetched and displayed successfully",t.data)}else Swal.fire({icon:"error",title:"Error",text:"Failed to fetch units"})})).catch((function(t){console.error("Error fetching units:",t),Swal.fire({icon:"error",title:"Error",text:"Error fetching units"})})),fetch("http://localhost:3001/products").then((function(t){return t.json()})).then((function(t){t.success?(n=t.data,c(),a()):Swal.fire({icon:"error",title:"Error",text:"Failed to fetch data"})})).catch((function(t){console.error("Error fetching data:",t),Swal.fire({icon:"error",title:"Error",text:"Error fetching data"})})),document.getElementById("btn-search-data").addEventListener("click",l),document.getElementById("prev-page").addEventListener("click",(function(){o>1&&(o--,a())})),document.getElementById("next-page").addEventListener("click",(function(){var t=Math.ceil(n.length/r);o<t&&(o++,a())})),document.getElementById("first-page").addEventListener("click",(function(){o=1,a()})),document.getElementById("last-page").addEventListener("click",(function(){o=Math.ceil(n.length/r),a()})),document.getElementById("page-number").addEventListener("change",(function(t){var e=parseInt(t.target.value),c=Math.ceil(n.length/r);e>=1&&e<=c&&(o=e,a())})),document.getElementById("row_per_page").addEventListener("change",(function(t){r=parseInt(t.target.value),o=1,c(),a()})),document.getElementById("export-excel-button").addEventListener("click",(function(){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.getElementById(t),o=XLSX.utils.table_to_book(n,{sheet:"Sheet1"}),r=XLSX.write(o,{bookType:"xlsx",type:"binary"});var c=document.createElement("a");c.href=URL.createObjectURL(new Blob([function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),o=0;o<t.length;o++)n[o]=255&t.charCodeAt(o);return e}(r)],{type:"application/octet-stream"})),c.download=e?e+".xlsx":"excel_data.xlsx",document.body.appendChild(c),c.click(),document.body.removeChild(c)}("products-table","Products")})),document.getElementById("export-pdf-button").addEventListener("click",d),document.getElementById("print-button").addEventListener("click",i),document.getElementById("select-all-button").addEventListener("click",(function(){var t=document.querySelectorAll(".data-checkbox"),e=Array.from(t).every((function(t){return t.checked}));t.forEach((function(t){return t.checked=!e}))}))}))})();